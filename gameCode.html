<!doctype html>
<html lang="en">
<head>
    <title>A jQuery Drag-and-Drop Number Cards Game</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="stylesheet" type="text/css" href="style.css">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>

    <script type="text/javascript">

    // JavaScript will go here
    var correctCards = 0; // 1. Initialize the correctCards variable
            // Call init() when the document is ready
            // We use $( init ) to call our init() function once the DOM has loaded.
            $( init );

            function init() {

            // 3. Hide the success message
            // Within the init() function itself, we first hide the #successMessage div, 
            // and reduce its width and height to zero so that we can make it “pop out” when the game is won.
            $('#successMessage').hide(); 
            $('#successMessage').css( {
                left: '580px',
                top: '250px',
                width: 0,
                height: 0
            } );

            // 4. Reset the game
            // Since init() can be called after a game has already been played, 
            // we set correctCards to zero so that the game can begin again, 
            // and also clear out the #cardPile and #cardSlots divs so that we can populate them afresh.

            correctCards = 0;  
            $('#cardPile').html( '' );
            $('#cardSlots').html( '' );

            // 5. Create the pile of shuffled cards
            // To create the pile of cards, we first make an array, numbers, containing the numbers 1 to 10, 
            // then sort the array with a randomizing sort function to shuffle the numbers.
            var numbers = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]; // Create the pile of shuffled cards
            numbers.sort( function() { return Math.random() - .5 } );

            /*
                // Then we loop through each element in the numbers array, creating a div card element for each number. 
                // Inside the div we place the number, so that it appears on the card in the page. 
                // Once we’ve created the div object, we store the card’s number in a 'number' key inside the object 
                // by using jQuery’s data() method.
            */
            for ( var i=0; i<10; i++ ) {
                $('<div>' + numbers[i] + '</div>').data( 'number', numbers[i] ).attr( 'id', 'card'+numbers[i] ).appendTo( '#cardPile' ).draggable( {
                containment: '#content',
                stack: '#cardPile div',
                cursor: 'move',
                revert: true
                } );
            }
            /*
                // We also give the card div an id of 'cardn', where n is the card number. 
                // This lets us give each card a different colour in the CSS. We then append the card to the #cardPile div.
                // The interesting bit in the loop is, of course, the call to the draggable() method. This:
                // -- Makes the card draggable
                // -- Uses containment to constrain it to the #content div
                // -- Uses stack to ensure that the dragged card always sits on top of the other cards
                // -- Uses cursor to turn the mouse cursor into a move cursor during the drag, and
                // -- Sets the revert option to true. This makes the card slide back to its initial position when dropped, 
                //    so that the user can try again. We’ll turn this option off when the user has dragged the card to the correct slot, 
                //    as we’ll see in a moment.
            */

            // 6. Create the card slots
            /*
                // The last part of the init() function creates the 10 slots to drag the cards onto. 
                // We create an array called words that contains the words “one” to “ten”, 
                // then loop through the elements of the words array, creating a slot div for each number. 
                // As before, we use data() to record the number of the slot, so we can test if the user has dragged 
                // the correct card to the correct slot, and we append the slot to the #cardSlots div.
            */

            var words = [ 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten' ];
            for ( var i=1; i<=10; i++ ) {
                $('<div>' + words[i-1] + '</div>').data( 'number', i ).appendTo( '#cardSlots' ).droppable( {
                accept: '#cardPile div',
                hoverClass: 'hovered',
                drop: handleCardDrop
                } );
            }

            }

    </script>

</head>
<body>

<div id="content">

  <div id="cardPile"> </div>
  <div id="cardSlots"> </div>

  <div id="successMessage">
    <h2>Ye.e.e.s! You did it!</h2>
    <button onclick="init()">Play Again</button>
  </div>

</div>

</body>
</html>